@using Microsoft.AspNetCore.Components.Routing
@using Microsoft.AspNetCore.Components.Authorization

<div class="sidebar-shell">
    <div class="sidebar-brand">
        <div class="brand-left">
            <span class="brand-badge">SAT</span>
            <div class="brand-text">
                <div class="brand-title">SAT242516026</div>
                <div class="brand-sub">@_localizer["AppTitle"]</div>
            </div>
        </div>
    </div>
     <input type="checkbox" title="@_localizer["Menu"]" class="navbar-toggler" />
    <div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler')?.click()">
        <nav class="flex-column nav-modern">
       <div class="nav-section">@_localizer["Menu"]</div>
           <div class="nav-item px-3">
                <NavLink class="nav-link" href="/" Match="NavLinkMatch.All">
                    <span class="bi bi-house-door-fill me-2"></span>
                    @_localizer["Home"]
                </NavLink>
            </div>
          <AuthorizeView Context="auth">
                <Authorized>
                    @{
                        var isAdmin = auth.User.IsInRole("Admin") || auth.User.HasClaim("IsAdmin", "1");
                    }

                    @if (isAdmin)
                    {
                        <div class="nav-divider"></div>
                        <div class="nav-section">Admin</div>

                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/admin/mukellefler">
                                <span class="bi bi-people-fill me-2"></span>
                                @_localizer["Mukellefler"]
                            </NavLink>
                        </div>

                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/admin/beyannameler">
                                <span class="bi bi-file-earmark-text-fill me-2"></span>
                                @_localizer["Beyannameler"]
                            </NavLink>
                        </div>

                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/admin/tahakkuklar">
                                <span class="bi bi-receipt-cutoff me-2"></span>
                                @_localizer["Tahakkuklar"]
                            </NavLink>
                        </div>

                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/admin/odemeler">
                                <span class="bi bi-credit-card-fill me-2"></span>
                                @_localizer["Odemeler"]
                            </NavLink>
                        </div>
                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/logs-1">
                                <span class="bi bi-journal-text me-2"></span>
                                Logs
                            </NavLink>
                        </div>

                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/admin/dashboard">
                                <span class="bi bi-speedometer2 me-2"></span>
                                Dashboard
                            </NavLink>
                        </div>

                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/admin/reports/beyannameler">
                                <span class="bi bi-filetype-pdf me-2"></span>
                                Beyanname Raporu
                            </NavLink>
                        </div>
                    }
                    else
                    {
                         <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/user/mukelleflerim">
                                <span class="bi bi-people-fill me-2"></span>
                                Mükellefler
                            </NavLink>
                        </div>
                        <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/user/beyannamelerim">
                                <span class="bi bi-file-earmark-text-fill me-2"></span>
                                Beyannameler
                            </NavLink>
                        </div>
                          <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/user/tahakkuklarim">
                                <span class="bi bi-receipt-cutoff me-2"></span>
                                Tahakkuklar
                            </NavLink>
                        </div>
                       <div class="nav-item px-3">
                            <NavLink class="nav-link" href="/user/odemelerim">
                                <span class="bi bi-credit-card-fill me-2"></span>
                                Ödemeler
                            </NavLink>
                        </div>
                    }
                  <div class="nav-divider"></div>
                    <div class="nav-section">@_localizer["Account"]</div>
                    <div class="nav-item px-3">
                        <span class="nav-link" style="cursor: default;">
                            <span class="bi bi-person-circle me-2"></span>
                            @auth.User.Identity?.Name
                        </span>
                    </div>
                <div class="nav-item px-3">
                        <a class="nav-link nav-btn" href="/auth/logout">
                            <span class="bi bi-box-arrow-right me-2"></span>
                            @_localizer["Logout"]
                        </a>
                    </div>
                 </Authorized>
                <NotAuthorized>
                    <div class="nav-divider"></div>
                    <div class="nav-section">@_localizer["Account"]</div>
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="/kayit">
                            <span class="bi bi-person-plus-fill me-2"></span>
                            @_localizer["Register"]
                        </NavLink>
                    </div>
                    <div class="nav-item px-3">
                        <NavLink class="nav-link" href="/giris">
                            <span class="bi bi-box-arrow-in-right me-2"></span>
                            @_localizer["Login"]
                        </NavLink>
                    </div>
                </NotAuthorized>
            </AuthorizeView>
</nav>
    </div>
    </div>
